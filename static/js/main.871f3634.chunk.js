(this.webpackJsonplumin=this.webpackJsonplumin||[]).push([[0],{32:function(e,t,a){e.exports=a(51)},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(26),s=a.n(n),o=a(9),i=a(11),u=a(12),l=a(14),d=a(13),m=a(19),p=a(16),v=a(7),h=a(23),y=a(17),b=a.n(y);function f(){var e=Object(h.a)(["\nquery ProductsPrices($currency: Currency) {\n  prices: products {\n    id,\n    price(currency: $currency)\n  }\n}\n"]);return f=function(){return e},e}function E(){var e=Object(h.a)(["\n  query Products($currency: Currency) {\n    products {\n      id,\n      title,\n      image_url,\n      price(currency: $currency)\n    }\n  }\n"]);return E=function(){return e},e}function _(){var e=Object(h.a)(["\n  query Currency {\n    currency\n  }\n"]);return _=function(){return e},e}var C=b()(_()),O=b()(E()),j=b()(f()),P=c.a.createContext(),N=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).state={showCart:!1,subtotal:0,products:{},currency:"USD",currencyError:!1},r.setCartState=r.setCartState.bind(Object(v.a)(r)),r.setCurrency=r.setCurrency.bind(Object(v.a)(r)),r.addProduct=r.addProduct.bind(Object(v.a)(r)),r.removeProduct=r.removeProduct.bind(Object(v.a)(r)),r.updateProductQty=r.updateProductQty.bind(Object(v.a)(r)),r.updateProductPrice=r.updateProductPrice.bind(Object(v.a)(r)),r}return Object(u.a)(a,[{key:"setCartState",value:function(){this.setState((function(e){return{showCart:!e.showCart}}))}},{key:"setCurrency",value:function(e){var t=this;this.props.client.query({query:j,variables:{currency:e},errorPolicy:"all"}).then((function(a){a.errors?t.setState((function(){return{currencyError:!0}})):t.setState((function(){return{currency:e,currencyError:!1}}),(function(){t.updateProductPrices()}))}))}},{key:"addProduct",value:function(e){var t=this,a=this.state.products,r=e.id,c=this.updateProductPrice(e),n=a[r]?++a[r].quantity:1;this.setState((function(e){return{products:Object(p.a)({},e.products,Object(m.a)({},r,Object(p.a)({},c,{quantity:n})))}}),(function(){t.calculateSubtotal(),t.setCartState()}))}},{key:"updateProductPrice",value:function(e){var t=this.state.currency,a=this.props.client.cache.data.data,r='price({"currency":"'.concat(t,'"})'),c=e.id,n=e.__typename,s=a["".concat(n,":").concat(c)][r];return Object(p.a)({},e,{price:s})}},{key:"setProductsState",value:function(e){var t=this;this.setState((function(){return{products:e}}),(function(){t.calculateSubtotal()}))}},{key:"removeProduct",value:function(e){var t=this.state.products;delete t[e],this.setProductsState(t)}},{key:"updateProductPrices",value:function(){var e=this.props.client,t=this.state,a=t.products,r=t.currency,c=e.cache.data.data;Object.values(a).forEach((function(e){var t='price({"currency":"'.concat(r,'"})'),n=e.id,s=e.__typename,o=c["".concat(s,":").concat(n)][t];a[n]=Object(p.a)({},e,{price:o})})),this.setProductsState(a)}},{key:"updateProductQty",value:function(e,t){var a=this,r=this.state.products[t],c=r.quantity;switch(e){case"increase":c++;break;case"decrease":c--}c<1?this.removeProduct(t):this.setState((function(e){return{products:Object(p.a)({},e.products,Object(m.a)({},t,Object(p.a)({},r,{quantity:c})))}}),(function(){a.calculateSubtotal()}))}},{key:"calculateSubtotal",value:function(){var e=this.state.products,t=Object.values(e).reduce((function(e,t){return e+t.price*t.quantity}),0);this.setState((function(){return{subtotal:t}}))}},{key:"render",value:function(){return c.a.createElement(P.Provider,{value:{cart:this.state,setCartState:this.setCartState,setCurrency:this.setCurrency,addProduct:this.addProduct,removeProduct:this.removeProduct,updateProductQty:this.updateProductQty}},this.props.children)}}]),a}(r.Component),k=(a(37),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.context,t=e.cart,a=e.setCartState,r=t.products,n=Object.keys(r).length;return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__container container"},c.a.createElement("img",{className:"header__logo",src:"//cdn.shopify.com/s/files/1/0044/1237/5107/files/black.font.sipmle_360x.png?v=1555959070",alt:"Lumin"}),c.a.createElement("button",{className:"header__cart",onClick:a},c.a.createElement("img",{className:"header__cart-icon",src:"//cdn.shopify.com/s/files/1/0044/1237/5107/files/Image_1_2x_5f1251f7-a674-4496-92be-9cca5561534e.png?v=1581352198",alt:""}),c.a.createElement("span",{className:"header__cart-counter"},n))))}}]),a}(r.Component));k.contextType=P;var g=a(18);a(38);function S(e){var t=e.classList,a=e.text,r=e.clickEvent;return c.a.createElement("button",{className:"btn ".concat(t),onClick:r},a)}S.defaultProps={classList:"btn-primary",text:"Click Me"};var x=function(e){return Number(e).toFixed(2)},w=(a(39),function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).addToCart=r.addToCart.bind(Object(v.a)(r)),r}return Object(u.a)(a,[{key:"addToCart",value:function(){(0,this.context.addProduct)(this.props.data)}},{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.title,r=e.image_url,n=e.price;return c.a.createElement("div",{className:"item",key:t},c.a.createElement("div",{className:"item__img-container"},c.a.createElement("img",{src:r,alt:a})),c.a.createElement("h3",{className:"item__title"},a),c.a.createElement("p",{className:"item__price"},"From $",x(n)),c.a.createElement(S,{text:"Add to Cart",classList:"btn-primary item__action",clickEvent:this.addToCart}))}}]),a}(r.Component));function L(e){var t=e.products;return c.a.createElement(c.a.Fragment,null,t.map((function(e){return c.a.createElement(w,{data:e,key:e.id})})))}w.contextType=P,w.defaultProps={product:{id:1,title:"Age Management Collection",image_url:"https://d1b929y2mmls08.cloudfront.net/luminskin/img/new-landing-page/age-management.png",price:48}};a(40);function Q(e){var t=e.classList,a=e.show,r=e.text;return c.a.createElement("div",{className:"loader ".concat(t," ").concat(a?"loader--show":"")},c.a.createElement("div",{className:"loader__spinner"}),c.a.createElement("p",{className:"loader__text"},r))}Q.defaultProps={classList:"",show:!1,text:""};a(41);function q(){Object(r.useContext)(P).cart;var e=Object(g.a)(O,{variables:{currency:"USD"}}),t=e.data,a=e.loading,n=e.error;return a?c.a.createElement(Q,{show:a,text:"Loading products..."}):n?c.a.createElement(Q,{text:"Oops, something went wrong!",classList:"error"}):c.a.createElement("section",{className:"products"},c.a.createElement("div",{className:"products__container container"},c.a.createElement(L,{products:t.products})))}a(45);function T(){return c.a.createElement("section",{className:"hero"},c.a.createElement("div",{className:"container"},c.a.createElement("div",null,c.a.createElement("h2",{className:"hero__header"},"All Products"),c.a.createElement("p",{className:"hero__subheader"},"A 360\xb0 look at Lumin"))))}a(46);function $(e){var t=e.classList,a=e.decreaseEvent,r=e.increaseEvent,n=e.count;return c.a.createElement("div",{className:"counter ".concat(t)},c.a.createElement("span",{className:"counter__action",onClick:a},"-"),c.a.createElement("span",{className:"counter__text"},n),c.a.createElement("span",{className:"counter__action",onClick:r},"+"))}$.defaultProps={classList:"",quantity:1};a(47);var I=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).removeItem=r.removeItem.bind(Object(v.a)(r)),r.increaseQty=r.increaseQty.bind(Object(v.a)(r)),r.decreaseQty=r.decreaseQty.bind(Object(v.a)(r)),r}return Object(u.a)(a,[{key:"removeItem",value:function(){(0,this.context.removeProduct)(this.props.id)}},{key:"increaseQty",value:function(){(0,this.context.updateProductQty)("increase",this.props.id)}},{key:"decreaseQty",value:function(){(0,this.context.updateProductQty)("decrease",this.props.id)}},{key:"render",value:function(){var e=this.props.data,t=e.id,a=e.title,r=e.image_url,n=e.price,s=e.quantity,o=s*n;return c.a.createElement("div",{className:"cart-item",key:t},c.a.createElement("button",{className:"cart-item__close",onClick:this.removeItem},"x"),c.a.createElement("div",{className:"cart-item__desc"},c.a.createElement("h3",{className:"cart-item__title"},a),c.a.createElement("div",{className:"cart-item__qty"},c.a.createElement($,{increaseEvent:this.increaseQty,decreaseEvent:this.decreaseQty,count:s}),c.a.createElement("p",{className:"cart-item__price"},"$",x(o)))),c.a.createElement("div",{className:"cart-item__img"},c.a.createElement("img",{src:r,alt:a})))}}]),a}(r.Component);I.contextType=P;a(48);function A(e){var t=e.classList,a=e.text,r=e.changeEvent,n=e.options,s=e.disabled;return c.a.createElement("select",{className:"select ".concat(t),onChange:r,disabled:s},a&&c.a.createElement("option",{value:"",key:0},a),n.map((function(e,t){return c.a.createElement("option",{value:e,key:t+1},e)})))}function D(e){var t=e.errorState,a=e.updateCurrency,r=Object(g.a)(C,{variables:{currency:"USD"}}),n=r.data,s=r.loading,o=r.error,i=s||o?["USD","MXN","CAD"]:n.currency,u=t?"select--error":"";return c.a.createElement(c.a.Fragment,null,c.a.createElement(A,{classList:"".concat(u),options:i,changeEvent:a}))}A.defaultProps={options:["a","b","c"],disabled:""};a(49);var F=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(i.a)(this,a),(r=t.call(this,e)).updateCurrency=r.updateCurrency.bind(Object(v.a)(r)),r}return Object(u.a)(a,[{key:"renderProducts",value:function(){var e=this.context.cart.products;return Object.values(e).map((function(e){var t=e.id;return c.a.createElement(I,{data:e,id:t,key:t})}))}},{key:"updateCurrency",value:function(e){(0,this.context.setCurrency)(e.target.value)}},{key:"render",value:function(){var e=this.context,t=e.cart,a=e.setCartState,r=t.currencyError,n=t.showCart,s=t.subtotal,o=this.renderProducts();return o.length||(o=c.a.createElement("p",{className:"cart__products--none"},"There are no items in your cart")),c.a.createElement("section",{className:"cart ".concat(n?"cart--open":"")},c.a.createElement("div",{className:"cart__overlay"}),c.a.createElement("div",{className:"cart__content"},c.a.createElement("div",{className:"cart__header"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-4"},c.a.createElement("button",{className:"cart__close",onClick:a},c.a.createElement("img",{src:"//cdn.shopify.com/s/files/1/0044/1237/5107/files/down.png?v=1583510959",alt:""}))),c.a.createElement("div",{className:"col-4"},c.a.createElement("h1",{className:"cart__title"},"Your Cart")),c.a.createElement("div",{className:"col-4"})),c.a.createElement(D,{updateCurrency:this.updateCurrency,errorState:r})),c.a.createElement("div",{className:"cart__products"},o),c.a.createElement("div",{className:"cart__footer"},c.a.createElement("div",{className:"cart__subtotal"},c.a.createElement("span",null,"Subtotal"),c.a.createElement("span",null,"$",x(s))),c.a.createElement(S,{text:"Make this a Subscription (Save 20%)",classList:"btn-secondary btn--alt cart__btn"}),c.a.createElement(S,{text:"Proceed to Checkout",classList:"btn-primary btn--alt cart__btn"}))))}}]),a}(r.Component);F.contextType=P;a(50);var M=function(){return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,null),c.a.createElement(T,null),c.a.createElement(q,null),c.a.createElement(F,null))},U=new(a(31).a)({uri:"https://pangaea-interviews.now.sh/api/graphql"});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(o.a,{client:U},c.a.createElement(N,{client:U},c.a.createElement(M,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[32,1,2]]]);
//# sourceMappingURL=main.871f3634.chunk.js.map